#!/usr/bin/env bash

# Managed by Homebrew (or apt)
no_update=(
  basemap
  gdal
  numpy
  pillow
  pygame
  scipy
)

test "$1" = '-3' && pyversion=3

cmd="python$pyversion -m pip"

_a=${no_update[@]}
no_grep=${_a// /\\|}

packages="$(
  $cmd list \
    --outdated \
    --format=legacy \
    | grep -iv $no_grep \
    | awk '{print $1}'
)"

for pkg in $packages
do
  test -n "$pkg" && $cmd install --upgrade "$pkg"
done
